"use strict";const I=require("node:process"),b=require("crypto"),G=require("node:https"),T=require("node:http"),U=require("node:fs"),R=require("node:events");class E{ListenerMap;WrapperSession;ListenerManger=new Map;EventTask=new Map;constructor(){}createProxyDispatch(e){const t=this;return new Proxy({},{get(n,r,o){return typeof n[r]>"u"?(...s)=>{t.DispatcherListener.apply(t,[e,r,...s]).then()}:Reflect.get(n,r,o)}})}init({ListenerMap:e,WrapperSession:t}){this.ListenerMap=e,this.WrapperSession=t}CreatEventFunction(e){const t=e.split("/");if(t.length>1){const n="get"+t[0].replace("NodeIKernel",""),r=t[1],o=this.WrapperSession[n]();let s=o[r];return s=s.bind(o),s||void 0}}CreatListenerFunction(e,t=""){const n=this.ListenerMap[e];let r=this.ListenerManger.get(e+t);if(!r&&n){r=new n(this.createProxyDispatch(e));const o=e.match(/^NodeIKernel(.*?)Listener$/)[1],s="NodeIKernel"+o+"Service/addKernel"+o+"Listener";this.CreatEventFunction(s)(r),this.ListenerManger.set(e+t,r)}return r}async DispatcherListener(e,t,...n){this.EventTask.get(e)?.get(t)?.forEach((r,o)=>{if(r.createtime+r.timeout<Date.now()){this.EventTask.get(e)?.get(t)?.delete(o);return}r.checker&&r.checker(...n)&&r.func(...n)})}async CallNoListenerEvent(e="",t=3e3,...n){return new Promise(async(r,o)=>{const s=this.CreatEventFunction(e);let c=!1;setTimeout(()=>{c||o(new Error("NTEvent EventName:"+e+" timeout"))},t);const l=await s(...n);c=!0,r(l)})}async CallNormalEvent(e="",t="",n=1,r=3e3,o,...s){return new Promise(async(c,l)=>{const a=b.randomUUID();let u=0,p,g={};const d=()=>{u==0?l(new Error("NTEvent EventName:"+e+" ListenerName:"+t+" timeout")):c([g,...p])},f=setTimeout(d,r),m=t.split("/"),h=m[0],v=m[1],C={timeout:r,createtime:Date.now(),checker:o,func:(...q)=>{u++,p=q,u>=n&&(clearTimeout(f),d())}};this.EventTask.get(h)||this.EventTask.set(h,new Map),this.EventTask.get(h)?.get(v)||this.EventTask.get(h)?.set(v,new Map),this.EventTask.get(h)?.get(v)?.set(a,C),this.CreatListenerFunction(h),g=await this.CreatEventFunction(e)(...s)})}}class P{core;constructor(e){this.core=e}async copyFile(e,t){await this.core.util.copyFile(e,t)}async getFileSize(e){return await this.core.util.getFileSize(e)}async getVideoUrl(e,t){return(await this.core.session.getRichMediaService().getVideoPlayUrlV2({chatType:e.chatType,peerUid:e.peerUid,guildId:"0"},e.msgId,t.elementId,0,{downSourceType:1,triggerType:1})).urlResult.domainUrl[0].url}}class _{core;constructor(e){this.core=e}async setCacheSilentScan(e=!0){return""}getCacheSessionPathList(){return""}clearCache(e=["tmp","hotUpdate"]){return this.core.session.getStorageCleanService().clearCacheDataByKeys(e)}addCacheScannedPaths(e={}){return this.core.session.getStorageCleanService().addCacheScanedPaths(e)}scanCache(){return this.core.session.getStorageCleanService().scanCache()}getHotUpdateCachePath(){return""}getDesktopTmpPath(){return""}getChatCacheList(e,t=1e3,n=0){return this.core.session.getStorageCleanService().getChatCacheInfo(e,t,1,n)}getFileCacheInfo(e,t=1e3,n){}async clearChatCache(e=[],t=[]){return this.core.session.getStorageCleanService().clearChatCacheInfo(e,t)}}class D{core;constructor(e){this.core=e}async isBuddy(e){return this.core.session.getBuddyService().isBuddy(e)}async getFriends(e=!1){let[t,n]=await this.core.event.CallNormalEvent("NodeIKernelBuddyService/getBuddyList","NodeIKernelBuddyListener/onBuddyListChange",1,5e3,()=>!0,e);const r=[];for(const o of n)for(const s of o.buddyList)r.push(s);return r}async handleFriendRequest(e,t){let n=e.split("|");if(n.length<2)return;let r=n[0],o=n[1];this.core.session.getBuddyService()?.approvalFriendRequest({friendUid:r,reqTime:o,accept:t})}}var A=(i=>(i[i.DEFAULTTYPE=0]="DEFAULTTYPE",i[i.TITLETYPE=1]="TITLETYPE",i[i.NEWGROUPTYPE=2]="NEWGROUPTYPE",i))(A||{});class Q{core;constructor(e){this.core=e}async getGroups(e=!1){let[t,n,r]=await this.core.event.CallNormalEvent("NodeIKernelGroupService/getGroupList","NodeIKernelGroupListener/onGroupListUpdate",1,5e3,()=>!0,e);return r}async getGroupRecommendContactArkJson(e){return this.core.session.getGroupService().getGroupRecommendContactArkJson(e)}async CreatGroupFileFolder(e,t){return this.core.session.getRichMediaService().createGroupFolder(e,t)}async DelGroupFile(e,t){return this.core.session.getRichMediaService().deleteGroupFile(e,[102],t)}async DelGroupFileFolder(e,t){return this.core.session.getRichMediaService().deleteGroupFolder(e,t)}async getSingleScreenNotifies(e){let[t,n,r,o]=await this.core.event.CallNormalEvent("NodeIKernelGroupService/getSingleScreenNotifies","NodeIKernelGroupListener/onGroupSingleScreenNotifies",1,5e3,()=>!0,!1,"",e);return o}async getGroupMembers(e,t=3e3){const n=this.core.session.getGroupService(),r=n.createMemberListScene(e,"groupMemberList_MainWindow"),o=await n.getNextMemberList(r,void 0,t);if(o.errCode!==0)throw"获取群成员列表出错,"+o.errMsg;return o.result.infos}async getGroupNotifies(){}async GetGroupFileCount(e){return this.core.session.getRichMediaService().batchGetGroupFileCount(e)}async getGroupIgnoreNotifies(){}async getArkJsonGroupShare(e){return(await this.core.event.CallNoListenerEvent("NodeIKernelGroupService/getGroupRecommendContactArkJson",5e3,e)).arkJson}async handleGroupRequest(e,t,n){return this.core.session.getGroupService().operateSysNotify(!1,{operateType:t,targetMsg:{seq:e.seq,type:e.type,groupCode:e.group.groupCode,postscript:n||""}})}async quitGroup(e){return this.core.session.getGroupService().quitGroup(e)}async kickMember(e,t,n=!1,r=""){return this.core.session.getGroupService().kickMember(e,t,n,r)}async banMember(e,t){return this.core.session.getGroupService().setMemberShutUp(e,t)}async banGroup(e,t){return this.core.session.getGroupService().setGroupShutUp(e,t)}async setMemberCard(e,t,n){return this.core.session.getGroupService().modifyMemberCardName(e,t,n)}async setMemberRole(e,t,n){return this.core.session.getGroupService().modifyMemberRole(e,t,n)}async setGroupName(e,t){return this.core.session.getGroupService().modifyGroupName(e,t,!1)}async setGroupTitle(e,t,n){}async getGroupRemainAtTimes(e){this.core.session.getGroupService().getGroupRemainAtTimes(e)}async getMemberExtInfo(e,t){return this.core.session.getGroupService().getMemberExtInfo({groupCode:e,sourceType:A.TITLETYPE,beginUin:"0",dataTime:"0",uinList:[t],uinNum:"",seq:"",groupType:"",richCardNameVer:"",memberExtFilter:{memberLevelInfoUin:1,memberLevelInfoPoint:1,memberLevelInfoActiveDay:1,memberLevelInfoLevel:1,memberLevelInfoName:1,levelName:1,dataTime:1,userShowFlag:1,sysShowFlag:1,timeToUpdate:1,nickName:1,specialTitle:1,levelNameNew:1,userShowFlagNew:1,msgNeedField:1,cmdUinFlagExt3Grocery:1,memberIcon:1,memberInfoSeq:1}})}}class K{core;constructor(e){this.core=e}async setEmojiLike(e,t,n,r=!0){return n=n.toString(),this.core.session.getMsgService().setMsgEmojiLikes(e,t,n,n.length>3?"2":"1",r)}async getMultiMsg(e,t,n){return this.core.session.getMsgService().getMultiMsg(e,t,n)}async getMsgsByMsgId(e,t){return await this.core.session.getMsgService().getMsgsByMsgId(e,t)}async getMsgsBySeqAndCount(e,t,n,r,o){return await this.core.session.getMsgService().getMsgsBySeqAndCount(e,t,n,r,o)}async activateChat(e){}async activateChatAndGetHistory(e){}async sendMsgExtend(e,t){let n=this.core.session.getMsgService().getMsgUniqueId(Date.now().toString());return this.core.session.getMsgService().sendMsg(n,e,t,new Map)}async setMsgRead(e){return this.core.session.getMsgService().setMsgRead(e)}async getMsgHistory(e,t,n){return this.core.session.getMsgService().getMsgsIncludeSelf(e,t,n,!0)}async fetchRecentContact(){}async recallMsg(e,t){await this.core.session.getMsgService().recallMsg({chatType:e.chatType,peerUid:e.peerUid},t)}async forwardMsg(e,t,n){return this.core.session.getMsgService().forwardMsg(n,e,[t],new Map)}}class y{static async HttpsGetCookies(e){const t=e.startsWith("https")?G:T;return new Promise((n,r)=>{t.get(e,s=>{let c={};const l=a=>{if(a.statusCode===301||a.statusCode===302)if(a.headers.location){const u=new URL(a.headers.location,e);y.HttpsGetCookies(u.href).then(p=>{c={...c,...p},n(c)}).catch(p=>{r(p)})}else n(c);else n(c)};s.on("data",()=>{}),s.on("end",()=>{l(s)}),s.headers["set-cookie"]&&s.headers["set-cookie"].forEach(a=>{const u=a.split(";")[0].split("="),p=u[0],g=u[1];p&&g&&p.length>0&&g.length>0&&(c[p]=g)})}).on("error",s=>{r(s)})})}static async HttpGetJson(e,t="GET",n,r={},o=!0,s=!0){const c=new URL(e),l=e.startsWith("https://")?G:T,a={hostname:c.hostname,port:c.port,path:c.href,method:t,headers:r};return new Promise((u,p)=>{const g=l.request(a,d=>{let f="";d.on("data",m=>{f+=m.toString()}),d.on("end",()=>{try{if(d.statusCode&&d.statusCode>=200&&d.statusCode<300)if(o){const m=JSON.parse(f);u(m)}else u(f);else p(new Error(`Unexpected status code: ${d.statusCode}`))}catch(m){p(m)}})});g.on("error",d=>{p(d)}),(t==="POST"||t==="PUT"||t==="PATCH")&&(s?g.write(JSON.stringify(n)):g.write(n)),g.end()})}static async HttpGetText(e,t="GET",n,r={}){return this.HttpGetJson(e,t,n,r,!1,!1)}static async createFormData(e,t){let n="image/png";t.endsWith(".jpg")&&(n="image/jpeg");const r=[`------${e}\r
`,`Content-Disposition: form-data; name="share_image"; filename="${t}"\r
`,"Content-Type: "+n+`\r
\r
`],o=U.readFileSync(t),s=`\r
------${e}--`;return Buffer.concat([Buffer.from(r.join(""),"utf8"),o,Buffer.from(s,"utf8")])}}class B{core;constructor(e){this.core=e}async setLongNick(e){return this.core.session.getProfileService().setLongNick(e)}async setSelfOnlineStatus(e,t,n){return this.core.session.getMsgService().setStatus({status:e,extStatus:t,batteryStatus:n})}async getBuddyRecommendContactArkJson(e,t=""){return this.core.session.getBuddyService().getBuddyRecommendContactArkJson(e,t)}async like(e,t=1){return this.core.session.getProfileLikeService().setBuddyProfileLike({friendUid:e,sourceId:71,doLikeCount:t,doLikeTollCount:0})}async setQQAvatar(e){const t=await this.core.session.getProfileService().setHeader(e);return{result:t?.result,errMsg:t?.errMsg}}async getSelfInfo(){}async getUserInfo(e){}async modifySelfProfile(e){return this.core.session.getProfileService().modifyDesktopMiniProfile(e)}async getPSkey(e){return await this.core.session.getTipOffService().getPskey(e,!0)}async getQzoneCookies(e,t){const n="https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin="+e+"&clientkey="+t+"&u1=https%3A%2F%2Fuser.qzone.qq.com%2F"+e+"%2Finfocenter&keyindex=19%27";return await y.HttpsGetCookies(n)}async getSkey(e,t){const n="https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin="+e+"&clientkey="+t+"&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=19%27",o=(await y.HttpsGetCookies(n)).skey;if(!o)throw new Error("getSkey Skey is Empty");return o}async getRobotUinRange(){return(await this.core.session.getRobotService().getRobotUinRange({justFetchMsgConfig:"1",type:1,version:0,aioKeywordVersion:0}))?.response?.robotUinRanges}async getUidByUin(e){return(await this.core.event.CallNoListenerEvent("NodeIKernelUixConvertService/getUid",5e3,[e])).uidInfo.get(e)}async getUinByUid(e){return e?(await this.core.event.CallNoListenerEvent("NodeIKernelUixConvertService/getUin",5e3,[e])).uinInfo.get(e):""}async getUserDetailInfo(e){let[t,n]=await this.core.event.CallNormalEvent("NodeIKernelProfileService/getUserDetailInfo","NodeIKernelProfileListener/onProfileDetailInfoChanged",2,5e3,r=>r.uid===e,e);return n}static async getCookies(e,t,n){const r="https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin="+e+"&clientkey="+t+"&u1=https%3A%2F%2F"+n+"%2F"+e+"%2Finfocenter&keyindex=19%27";return await y.HttpsGetCookies(r)}async getUserDetailInfoByUin(e){return this.core.event.CallNoListenerEvent("NodeIKernelProfileService/getUserDetailInfoByUin",5e3,e)}async forceFetchClientKey(){return await this.core.session.getTicketService().forceFetchClientKey("")}}class O{async getGroupEssenceMsg(e,t,n,r){const o="https://qun.qq.com/cgi-bin/group_digest/digest_list?bkn="+r+"&group_code="+e+"&page_start="+t+"&page_limit=20";let s;try{s=await y.HttpGetJson(o,"GET","",{Cookie:n})}catch{return}if(s.retcode===0)return s}async getGroupMembers(e,t,n){let r=new Array;try{const o=[],s=await y.HttpGetJson("https://qun.qq.com/cgi-bin/qun_mgr/search_group_members?st=0&end=40&sort=1&gc="+e+"&bkn="+n,"POST","",{Cookie:t});if(!s?.count||s?.errcode!==0||!s?.mems)return[];for(const l in s.mems)r.push(s.mems[l]);const c=Math.ceil(s.count/40);for(let l=2;l<=c;l++){const a=y.HttpGetJson("https://qun.qq.com/cgi-bin/qun_mgr/search_group_members?st="+(l-1)*40+"&end="+l*40+"&sort=1&gc="+e+"&bkn="+n,"POST","",{Cookie:t});o.push(a)}for(let l=1;l<=c;l++){const a=await o[l];if(!(!a?.count||a?.errcode!==0||!a?.mems))for(const u in a.mems)r.push(a.mems[u])}}catch{return r}return r}async setGroupNotice(e,t="",n,r){let o;const s="https://web.qun.qq.com/cgi-bin/announce/add_qun_notice?bkn="+r;try{return o=await y.HttpGetJson(s,"GET","",{Cookie:n}),o}catch{return}}async getGrouptNotice(e,t,n){let r;const o="https://web.qun.qq.com/cgi-bin/announce/get_t_list?bkn="+n+"&qid="+e+"&ft=23&ni=1&n=1&i=1&log_read=1&platform=1&s=-1&n=20";try{return r=await y.HttpGetJson(o,"GET","",{Cookie:t}),r?.ec!==0?void 0:r}catch{return}}genBkn(e){e=e||"";let t=5381;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=t+(t<<5)+r}return(t&2147483647).toString()}async getGroupHonorInfo(e,t,n){async function r(s,c){let l="https://qun.qq.com/interactive/honorlist?gc="+s+"&type="+c.toString(),a="",u;try{a=await y.HttpGetText(l,"GET","",{Cookie:n});const p=a.match(/window\.__INITIAL_STATE__=(.*?);/);return p&&(u=JSON.parse(p[1].trim())),c===1?u?.talkativeList:u?.actorList}catch{}}let o={group_id:e};if(t==="talkative"||t==="all")try{let s=await r(e,1);if(!s)throw new Error("获取龙王信息失败");o.current_talkative={user_id:s[0]?.uin,avatar:s[0]?.avatar,nickname:s[0]?.name,day_count:0,description:s[0]?.desc},o.talkative_list=[];for(const c of s)o.talkative_list.push({user_id:c?.uin,avatar:c?.avatar,description:c?.desc,day_count:0,nickname:c?.name})}catch{}if(t==="performer"||t==="all")try{let s=await r(e,2);if(!s)throw new Error("获取群聊之火失败");o.performer_list=[];for(const c of s)o.performer_list.push({user_id:c?.uin,nickname:c?.name,avatar:c?.avatar,description:c?.desc})}catch{}if(t==="performer"||t==="all")try{let s=await r(e,3);if(!s)throw new Error("获取群聊炽焰失败");o.legend_list=[];for(const c of s)o.legend_list.push({user_id:c?.uin,nickname:c?.name,avatar:c?.avatar,desc:c?.description})}catch{}if(t==="emotion"||t==="all")try{let s=await r(e,6);if(!s)throw new Error("获取快乐源泉失败");o.emotion_list=[];for(const c of s)o.emotion_list.push({user_id:c?.uin,nickname:c?.name,avatar:c?.avatar,desc:c?.description})}catch{}return(t==="emotion"||t==="all")&&(o.strong_newbie_list=[]),o}}class W{core;constructor(e){this.core=e}async hasOtherRunningQQProcess(){return this.core.util.hasOtherRunningQQProcess()}async ORCImage(e){return this.core.session.getNodeMiscService().wantWinScreenOCR(e)}async translateEnWordToZn(e){return this.core.session.getRichMediaService().translateEnWordToZn(e)}async getOnlineDev(){return this.core.session.getMsgService().getOnLineDev()}async getArkJsonCollection(e){return await this.core.event.CallNoListenerEvent("NodeIKernelCollectionService/collectionArkShare",5e3,"1717662698058")}async BootMiniApp(e,t){await this.core.session.getNodeMiscService().setMiniAppVersion("2.16.4");let n=await this.core.session.getNodeMiscService().getMiniAppPath();return console.log(n),this.core.session.getNodeMiscService().startNewMiniApp(e,t)}}class J{core;constructor(e){this.core=e}async createCollection(e,t,n,r,o){let s={commInfo:{bid:1,category:2,author:{type:1,numId:e,strId:n,groupId:"0",groupName:"",uid:t},customGroupId:"0",createTime:Date.now().toString(),sequence:Date.now().toString()},richMediaSummary:{originalUri:"",publisher:"",richMediaVersion:0,subTitle:"",title:"",brief:r,picList:[],contentType:1},richMediaContent:{rawData:o,bizDataList:[],picList:[],fileList:[]},need_share_url:!1};return this.core.session.getCollectionService().createNewCollectionItem(s)}async getAllCollection(e=0,t=50){let n={category:e,groupId:-1,forceSync:!0,forceFromDb:!1,timeStamp:"0",count:t,searchDown:!0};return this.core.session.getCollectionService().getCollectionItemList(n)}}class F{session;util;event;ApiCollection;ApiFile;ApiFileCache;ApiFriend;ApiGroup;ApiMsg;ApiSystem;ApiUser;ApiWeb;constructor(e,t){this.session=t,this.util=new e.NodeQQNTWrapperUtil,this.event=new E,this.event.init({ListenerMap:e,WrapperSession:this.session}),this.ApiCollection=new J(this),this.ApiFile=new P(this),this.ApiFileCache=new _(this),this.ApiFriend=new D(this),this.ApiGroup=new Q(this),this.ApiMsg=new K(this),this.ApiSystem=new W(this),this.ApiUser=new B(this),this.ApiWeb=new O}getWrapperSession(){return this.session}getWrapperUtil(){return this.util}getApiCollection(){return this.ApiCollection}getApiFile(){return this.ApiFile}getApiFileCache(){return this.ApiFileCache}getApiFriend(){return this.ApiFriend}getApiGroup(){return this.ApiGroup}getApiMsg(){return this.ApiMsg}getApiSystem(){return this.ApiSystem}getApiUser(){return this.ApiUser}getApiWeb(){return this.ApiWeb}}class H{onLoginConnected(...e){}onLoginDisConnected(...e){}onLoginConnecting(...e){}onQRCodeGetPicture(e){}onQRCodeLoginPollingStarted(...e){}onQRCodeSessionUserScaned(...e){}onQRCodeLoginSucceed(e){}onQRCodeSessionFailed(...e){}onLoginFailed(...e){}onLogoutSucceed(...e){}onLogoutFailed(...e){}onUserLoggedIn(...e){}onQRCodeSessionQuickLoginFailed(...e){}onPasswordLoginFailed(...e){}OnConfirmUnusualDeviceFailed(...e){}onQQLoginNumLimited(...e){}onLoginState(...e){}}let S;const L=(i,e,t)=>{t&&console.log(`==============${t}被调用=============`),e.length&&(console.log("参数:"),console.log(JSON.stringify(e))),console.log("返回值:"),console.log(JSON.stringify(i)),typeof i=="object"&&(console.log("原型对象:"),console.log(Object.getPrototypeOf(i)))},N=({instance:i,rootName:e,log:t,eventBlacklist:n,eventListeners:r,eventEmitter:o,eventInterceptors:s})=>{const c=Object.getPrototypeOf(i);for(const l of Object.getOwnPropertyNames(c)){if(typeof c[l]!="function")continue;const a=`${e}.${l}`;i[l]=function(...u){if(n?.includes(a))return;const p=s?.[a]?.(u)??u,g=c[l].apply(this,p);if(g instanceof Promise)g.then(d=>{const f={ret:d,params:u};t&&L(d,u,a),r?.[a]?.(f),o?.emit(a,f)});else{const d={ret:g,params:u};t&&L(g,u,a),r?.[a]?.(d),o?.emit(a,d)}return l.includes("Service")&&N({instance:g,rootName:`${a}`,log:t,eventBlacklist:n,eventListeners:r,eventInterceptors:s,eventEmitter:o}),g}}return i},w=new Map,x=i=>new Promise(e=>{I.dlopen=new Proxy(I.dlopen,{apply(t,n,r){const o=Reflect.apply(t,n,r),[,s]=r;if(s.includes("wrapper.node")){const c=r[0].exports;r[0].exports=new Proxy(c,{get(l,a,u){return typeof l[a]!="function"?Reflect.get(l,a,u):new Proxy(l[a],{construct(p,g){const d=w.get(a),f=!d&&i.log;f&&console.log(`--------------------- ${a}被构造 ---------------------`);const m={rootName:a,log:i.log,eventBlacklist:i.eventBlacklist,eventListeners:i.eventListeners,eventEmitter:i.eventEmitter,eventInterceptors:i.eventInterceptors};g.length&&(f&&(console.log("构造参数:"),console.log(g)),typeof g[0]=="object"&&g[0]&&(g[0]=N({...m,instance:Object.create(g[0])})));const h=Reflect.construct(p,g);if(Object.getOwnPropertyNames(h).length===0&&N({...m,instance:h}),!d&&w.set(a,h),a==="NodeIQQNTWrapperSession"&&S&&!i.waitLogin){const v=new F(S,h);e(v)}if(a==="NodeIKernelLoginService"&&S&&i.waitLogin){const v=h,C=new H;C.onQRCodeLoginSucceed=()=>{const M=new F(S,w.get("NodeIQQNTWrapperSession"));e(M)},v.addKernelLoginListener(new S.NodeIKernelLoginListener(C))}return f&&L(h,[]),h}})}}),S=c}return o}})}),j=new R.EventEmitter;var k=(i=>(i.sendLog="NodeIQQNTWrapperSession.getNodeMiscService.sendLog",i.requestTianshuAdv="NodeIQQNTWrapperSession.getMsgService.requestTianshuAdv",i.onQRCodeLoginSucceed="NodeIKernelLoginListener.onQRCodeLoginSucceed",i.onUserDetailInfoChanged="NodeIKernelProfileListener.onUserDetailInfoChanged",i.onSelfStatusChanged="NodeIKernelProfileListener.onSelfStatusChanged",i.getLoginList="NodeIKernelLoginService.getLoginList",i.onRecvMsg="NodeIKernelMsgListener.onRecvMsg",i.onRecentContactListChangedVer2="NodeIKernelRecentContactListener.onRecentContactListChangedVer2",i.onRecentContactNotification="NodeIKernelRecentContactListener.onRecentContactNotification",i.onContactUnreadCntUpdate="NodeIKernelMsgListener.onContactUnreadCntUpdate",i))(k||{});(async()=>{const i=await x({log:!1,eventBlacklist:[k.sendLog,k.requestTianshuAdv],waitLogin:!1,eventEmitter:j});console.log("直接初始化"),console.log(i)})();
